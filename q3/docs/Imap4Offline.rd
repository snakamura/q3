=begin
=オフラインでの操作

IMAP4アカウントでは一部の操作を((<オフライン|URL:OnlineOffline.html>))でも行うことができます。例えば、((<キャッシュ|URL:Imap4Cache.html>))されたメッセージはオフラインでも表示することができます。また、フラグの設定やメッセージの移動・コピーなどもオフラインで行うことができます。ただし、フォルダに作成などはオンラインの状態でないと行うことはできません。

オフラインの間に行われた操作は、ローカルのメッセージにも反映されますが、それと同時にofflinejobというファイルに保存され、次回サーバに接続したときにサーバに送られます。例えば、メッセージを移動した場合には一時的に移動先のフォルダにメッセージが現れますが、同時に移動するメッセージの情報がofflinejobファイルに保存されます。次にサーバに接続したときには、offlinejobファイルから情報を取得してサーバ上のメッセージを更新し、一時的に作成しておいたメッセージを削除します。その後、そのフォルダを同期するとサーバ上で移動されたメッセージが再度同期されて、メッセージが現れることになります。

複数のクライアントから同じアカウントでサーバに接続する場合、オフラインでの操作をサーバに反映させる前に別のクライアントからサーバ上のメッセージを移動・削除などしてしまうと、オフラインでの操作を正しく反映させることができなくなってしまいますので注意してください。

=end
